{"ast":null,"code":"import _classCallCheck from \"/home/hoonakker/Dropbox/dvt/projet-JAVASCRIPT/react-tutos/dj-tango-js/IHM/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/hoonakker/Dropbox/dvt/projet-JAVASCRIPT/react-tutos/dj-tango-js/IHM/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/hoonakker/Dropbox/dvt/projet-JAVASCRIPT/react-tutos/dj-tango-js/IHM/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/hoonakker/Dropbox/dvt/projet-JAVASCRIPT/react-tutos/dj-tango-js/IHM/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/hoonakker/Dropbox/dvt/projet-JAVASCRIPT/react-tutos/dj-tango-js/IHM/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/hoonakker/Dropbox/dvt/projet-JAVASCRIPT/react-tutos/dj-tango-js/IHM/src/components/milonga-list.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport * as milongaActions from '../redux/actions/milongaActions';\nimport Save from 'material-ui-icons/Save';\nimport OpenMilonga from 'material-ui-icons/FolderOpen';\nimport Info from 'material-ui-icons/Info';\nimport Delete from 'material-ui-icons/DeleteForever';\nimport Sweep from 'material-ui-icons/DeleteSweep';\nimport IconButton from \"material-ui/IconButton/index\";\nimport Paper from \"material-ui/es/Paper/Paper\";\nimport Tooltip from 'rc-tooltip';\nimport 'rc-tooltip/assets/bootstrap.css';\nimport VirtualList from 'react-tiny-virtual-list';\nimport { sortStatus as SORT } from \"../services/dj-const\";\nimport DataLine from './data-line';\nimport * as djUtils from \"./dj-utils\";\nimport { ItemTypes } from '../services/dj-const';\nimport { DropTarget } from 'react-dnd';\nvar milongaTarget = {\n  drop: function drop(props, monitor) {\n    // moveTango(props.beforeId, props.afterId);\n    //\n    var tangoToAdd = djUtils.getTangoListFromIdList(props.selectedTangos, props.tangoList); // console.log(props.milonga.indexToDrop);\n    // console.log(tangoToAdd);\n    // console.log(props.milonga.list);\n\n    props.dispatch(milongaActions.dropTangos(props.milonga.indexToDrop, tangoToAdd, props.milonga.list)); // console.log(props, monitor);\n  }\n};\n\nfunction collect(connect, monitor) {\n  return {\n    connectDropTarget: connect.dropTarget(),\n    isOver: monitor.isOver()\n  };\n}\n\nvar rowsTemplate = [{\n  name: '',\n  field: 'played',\n  size: 40,\n  align: 'center',\n  sortStatus: SORT.NONE\n}, {\n  name: 'Title',\n  field: 'title',\n  size: 'auto',\n  align: 'left',\n  sortStatus: SORT.NONE\n}, {\n  name: 'Artist',\n  field: 'artist',\n  size: 'auto',\n  align: 'left',\n  sortStatus: SORT.NONE\n}, {\n  name: 'Singer',\n  field: 'singer',\n  size: 'auto',\n  align: 'left',\n  sortStatus: SORT.NONE\n}, {\n  name: 'Album',\n  field: 'album',\n  size: 'auto',\n  align: 'left',\n  sortStatus: SORT.NONE\n}, {\n  name: 'Genre',\n  field: 'genre',\n  size: 100,\n  align: 'center',\n  sortStatus: SORT.ASC\n}, {\n  name: 'Year',\n  field: 'year',\n  size: 50,\n  align: 'center',\n  sortStatus: SORT.NONE\n}, {\n  name: 'Bpm',\n  field: 'bpmHuman',\n  size: 80,\n  align: 'center',\n  sortStatus: SORT.NONE\n}, {\n  name: 'Time',\n  field: 'duration',\n  size: 40,\n  align: 'center',\n  sortStatus: SORT.NONE\n}];\nvar styles = {\n  main: {\n    display: 'flex',\n    flexDirection: 'column',\n    flex: '1 1 50%',\n    margin: '3px 0px 0px 0px',\n    padding: '2px',\n    color: 'white',\n    // backgroundColor: 'blue',\n    border: '1pt solid ' + '#5f5f5f',\n    overflow: 'hidden'\n  },\n  virtualListContainer: {\n    flex: \"1\",\n    display: 'flex',\n    flexDirection: 'column'\n  }\n};\n\nvar MilongaList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MilongaList, _Component);\n\n  function MilongaList(props) {\n    var _this;\n\n    _classCallCheck(this, MilongaList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MilongaList).call(this, props));\n\n    _this.handleClearMilonga = function () {\n      _this.props.dispatch(milongaActions.clearMilonga());\n    };\n\n    _this.handleOnClick = function () {\n      /*  // console.log(\"I have clicked on the div\");\n        let tangoToAdd = [];\n        this.props.selectedTangos.forEach((id) => {\n          // console.log(\"I will add tango \"+this.props.tangoList[id].title);\n          tangoToAdd.push(this.props.tangoList[id]);\n        });\n        console.log(tangoToAdd);\n        this.props.dispatch(milongaActions.addTango(tangoToAdd, this.props.milonga.list));\n      */\n    };\n\n    _this.state = {\n      containerHeight: 600,\n      containerWidth: 600\n    };\n    return _this;\n  }\n\n  _createClass(MilongaList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.updateDimensions();\n      window.addEventListener(\"resize\", this.updateDimensions.bind(this));\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.removeEventListener(\"resize\", this.updateDimensions);\n    }\n  }, {\n    key: \"updateDimensions\",\n    value: function updateDimensions() {\n      var containerHeight = this.refs.virtualContainer.clientHeight;\n      var containerWidth = this.refs.virtualContainer.clientWidth;\n      this.setState({\n        containerHeight: containerHeight,\n        containerWidth: containerWidth\n      });\n    }\n  }, {\n    key: \"getHeader\",\n    value: function getHeader() {\n      var sizedRows = djUtils.getSizedRows(rowsTemplate, this.state.containerWidth);\n      console.log(sizedRows);\n    }\n  }, {\n    key: \"getMenu\",\n    value: function getMenu() {\n      var styles = {\n        paperContainer: {\n          display: 'flex',\n          alignItems: 'center',\n          margin: '0px 2px 5px 2px'\n        },\n        button: {\n          height: '36px'\n        },\n        toolTip: {\n          fontSize: '20px'\n        },\n        tooltip: {\n          display: 'flex',\n          flex: '1 1 auto',\n          alignItems: 'center',\n          fontSize: '16px',\n          fontWeight: 'bold',\n          minHeight: '30px'\n        },\n        overlayStyle: {\n          // backgroundColor:'#000',\n          opacity: '1'\n        }\n      };\n      return React.createElement(Paper, {\n        style: styles.paperContainer,\n        elevation: 4,\n        key: 'filter_source_menu',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, React.createElement(Tooltip, {\n        placement: 'bottom',\n        overlay: React.createElement(\"div\", {\n          style: styles.tooltip,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 208\n          },\n          __self: this\n        }, 'Save'),\n        overlayStyle: styles.overlayStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, React.createElement(IconButton, {\n        style: styles.button,\n        color: 'secondary',\n        onClick: function onClick() {\n          console.log('save milonga');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, React.createElement(Save, {\n        style: styles.icon,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }))), React.createElement(Tooltip, {\n        placement: 'bottom',\n        overlay: React.createElement(\"div\", {\n          style: styles.tooltip,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 221\n          },\n          __self: this\n        }, 'Open a milonga'),\n        overlayStyle: styles.overlayStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }, React.createElement(IconButton, {\n        style: styles.button,\n        color: 'secondary',\n        onClick: function onClick() {\n          console.log('open milonga');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, React.createElement(OpenMilonga, {\n        style: styles.icon,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }))), React.createElement(Tooltip, {\n        placement: 'bottom',\n        overlay: React.createElement(\"div\", {\n          style: styles.tooltip,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 234\n          },\n          __self: this\n        }, 'Show infos about Milonga'),\n        overlayStyle: styles.overlayStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }, React.createElement(IconButton, {\n        style: styles.button,\n        color: 'secondary',\n        onClick: function onClick() {\n          console.log('info about milonga');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }, React.createElement(Info, {\n        style: styles.icon,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }))), React.createElement(Tooltip, {\n        placement: 'bottom',\n        overlay: React.createElement(\"div\", {\n          style: styles.tooltip,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 247\n          },\n          __self: this\n        }, 'Delete the milonga'),\n        overlayStyle: styles.overlayStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, React.createElement(IconButton, {\n        style: styles.button,\n        color: 'secondary',\n        onClick: function onClick() {\n          console.log('delete milonga');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }, React.createElement(Delete, {\n        style: styles.icon,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }))), React.createElement(Tooltip, {\n        placement: 'bottom',\n        overlay: React.createElement(\"div\", {\n          style: styles.tooltip,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 261\n          },\n          __self: this\n        }, 'Empty the milonga and start a new one'),\n        overlayStyle: styles.overlayStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      }, React.createElement(IconButton, {\n        style: styles.button,\n        color: 'secondary',\n        onClick: this.handleClearMilonga,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }, React.createElement(Sweep, {\n        style: styles.icon,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }))));\n    }\n  }, {\n    key: \"rowRenderer\",\n    value: function rowRenderer(params) {\n      var sizedRows = djUtils.getSizedRows(rowsTemplate, this.state.containerWidth);\n      var tango = this.props.milonga.list[params.index];\n      return React.createElement(DataLine, {\n        tango: tango,\n        sizedRows: sizedRows,\n        rowHeight: this.props.milonga.listRowHeight,\n        style: params.style,\n        index: params.index,\n        key: 'milonga_' + tango._id + '_' + params.index,\n        isMilonga: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280\n        },\n        __self: this\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var milonga = this.props.milonga;\n      var _this$props = this.props,\n          x = _this$props.x,\n          y = _this$props.y,\n          connectDropTarget = _this$props.connectDropTarget,\n          isOver = _this$props.isOver;\n      return connectDropTarget(React.createElement(\"div\", {\n        style: styles.main,\n        onClick: this.handleOnClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      }, this.getMenu(), this.getHeader(), React.createElement(\"div\", {\n        style: styles.virtualListContainer,\n        ref: 'virtualContainer',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302\n        },\n        __self: this\n      }, React.createElement(VirtualList, {\n        width: \"100%\",\n        height: this.state.containerHeight + milonga.listRowHeight,\n        itemCount: milonga.list.length,\n        itemSize: milonga.listRowHeight // Also supports variable heights (array or function getter)\n        ,\n        renderItem: function renderItem(index, style) {\n          return _this2.rowRenderer(index);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return MilongaList;\n}(Component);\n/*MilongaList.propTypes = {\n  connectDropTarget: PropTypes.func.isRequired,\n  isOver: PropTypes.bool.isRequired\n};*/\n\n\nMilongaList = DropTarget(ItemTypes.TANGO, milongaTarget, collect)(MilongaList);\nexport default connect(function (store) {\n  return {\n    milonga: store.milonga,\n    selectedTangos: store.source.selectedTangos,\n    tangoList: store.source.displayTangoList\n  };\n})(MilongaList);","map":{"version":3,"sources":["/home/hoonakker/Dropbox/dvt/projet-JAVASCRIPT/react-tutos/dj-tango-js/IHM/src/components/milonga-list.js"],"names":["React","Component","connect","PropTypes","milongaActions","Save","OpenMilonga","Info","Delete","Sweep","IconButton","Paper","Tooltip","VirtualList","sortStatus","SORT","DataLine","djUtils","ItemTypes","DropTarget","milongaTarget","drop","props","monitor","tangoToAdd","getTangoListFromIdList","selectedTangos","tangoList","dispatch","dropTangos","milonga","indexToDrop","list","collect","connectDropTarget","dropTarget","isOver","rowsTemplate","name","field","size","align","NONE","ASC","styles","main","display","flexDirection","flex","margin","padding","color","border","overflow","virtualListContainer","MilongaList","handleClearMilonga","clearMilonga","handleOnClick","state","containerHeight","containerWidth","updateDimensions","window","addEventListener","bind","removeEventListener","refs","virtualContainer","clientHeight","clientWidth","setState","sizedRows","getSizedRows","console","log","paperContainer","alignItems","button","height","toolTip","fontSize","tooltip","fontWeight","minHeight","overlayStyle","opacity","icon","params","tango","index","listRowHeight","style","_id","x","y","getMenu","getHeader","length","rowRenderer","TANGO","store","source","displayTangoList"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {connect} from 'react-redux';\nimport PropTypes from 'prop-types';\nimport * as milongaActions from '../redux/actions/milongaActions';\nimport Save from 'material-ui-icons/Save';\nimport OpenMilonga from 'material-ui-icons/FolderOpen';\nimport Info from 'material-ui-icons/Info';\nimport Delete from 'material-ui-icons/DeleteForever';\nimport Sweep from 'material-ui-icons/DeleteSweep'\nimport IconButton from \"material-ui/IconButton/index\";\nimport Paper from \"material-ui/es/Paper/Paper\";\nimport Tooltip from 'rc-tooltip';\nimport 'rc-tooltip/assets/bootstrap.css';\nimport VirtualList from 'react-tiny-virtual-list';\nimport {sortStatus as SORT} from \"../services/dj-const\";\nimport DataLine from './data-line';\nimport * as djUtils from \"./dj-utils\";\nimport {ItemTypes} from '../services/dj-const';\nimport {DropTarget} from 'react-dnd';\n\nconst milongaTarget = {\n  drop(props, monitor) {\n    // moveTango(props.beforeId, props.afterId);\n    //\n    let tangoToAdd = djUtils.getTangoListFromIdList(props.selectedTangos, props.tangoList);\n\n    // console.log(props.milonga.indexToDrop);\n    // console.log(tangoToAdd);\n    // console.log(props.milonga.list);\n    props.dispatch(milongaActions.dropTangos(props.milonga.indexToDrop,tangoToAdd,props.milonga.list ));\n\n\n    // console.log(props, monitor);\n  }\n};\n\nfunction collect(connect, monitor) {\n  return {\n    connectDropTarget: connect.dropTarget(),\n    isOver: monitor.isOver()\n  };\n}\n\nconst rowsTemplate = [\n  {\n    name: '',\n    field: 'played',\n    size: 40,\n    align: 'center',\n    sortStatus: SORT.NONE,\n  },\n  {\n    name: 'Title',\n    field: 'title',\n    size: 'auto',\n    align: 'left',\n    sortStatus: SORT.NONE,\n  },\n  {\n    name: 'Artist',\n    field: 'artist',\n    size: 'auto',\n    align: 'left',\n    sortStatus: SORT.NONE,\n  },\n  {\n    name: 'Singer',\n    field: 'singer',\n    size: 'auto',\n    align: 'left',\n    sortStatus: SORT.NONE,\n  },\n  {\n    name: 'Album',\n    field: 'album',\n    size: 'auto',\n    align: 'left',\n    sortStatus: SORT.NONE,\n  },\n  {\n    name: 'Genre',\n    field: 'genre',\n    size: 100,\n    align: 'center',\n    sortStatus: SORT.ASC,\n  },\n  {\n    name: 'Year',\n    field: 'year',\n    size: 50,\n    align: 'center',\n    sortStatus: SORT.NONE,\n  },\n  {\n    name: 'Bpm',\n    field: 'bpmHuman',\n    size: 80,\n    align: 'center',\n    sortStatus: SORT.NONE,\n  },\n  {\n    name: 'Time',\n    field: 'duration',\n    size: 40,\n    align: 'center',\n    sortStatus: SORT.NONE,\n  }\n];\n\nconst styles = {\n  main: {\n    display: 'flex',\n    flexDirection: 'column',\n    flex: '1 1 50%',\n    margin: '3px 0px 0px 0px',\n    padding: '2px',\n    color: 'white',\n    // backgroundColor: 'blue',\n    border: '1pt solid ' + '#5f5f5f',\n    overflow: 'hidden',\n  },\n  virtualListContainer: {\n    flex: \"1\",\n    display: 'flex',\n    flexDirection: 'column',\n  },\n\n};\n\nclass MilongaList extends Component {\n  handleClearMilonga = () => {\n    this.props.dispatch(milongaActions.clearMilonga());\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      containerHeight: 600,\n      containerWidth: 600,\n    };\n\n  }\n\n  componentDidMount() {\n    this.updateDimensions();\n    window.addEventListener(\"resize\", this.updateDimensions.bind(this));\n\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.updateDimensions);\n  }\n\n  updateDimensions() {\n    const containerHeight = this.refs.virtualContainer.clientHeight;\n    const containerWidth = this.refs.virtualContainer.clientWidth;\n    this.setState({containerHeight, containerWidth});\n  }\n\n  handleOnClick = () => {\n    /*  // console.log(\"I have clicked on the div\");\n      let tangoToAdd = [];\n      this.props.selectedTangos.forEach((id) => {\n        // console.log(\"I will add tango \"+this.props.tangoList[id].title);\n        tangoToAdd.push(this.props.tangoList[id]);\n      });\n      console.log(tangoToAdd);\n      this.props.dispatch(milongaActions.addTango(tangoToAdd, this.props.milonga.list));\n  */\n  };\n\n  getHeader() {\n\n    let sizedRows = djUtils.getSizedRows(rowsTemplate, this.state.containerWidth);\n    console.log(sizedRows);\n\n  }\n\n  getMenu() {\n    const styles = {\n      paperContainer: {\n        display: 'flex',\n        alignItems: 'center',\n        margin: '0px 2px 5px 2px',\n      },\n      button: {\n        height: '36px',\n      },\n      toolTip: {\n        fontSize: '20px',\n      },\n      tooltip: {\n        display: 'flex',\n        flex: '1 1 auto',\n        alignItems: 'center',\n        fontSize: '16px',\n        fontWeight: 'bold',\n        minHeight: '30px',\n      },\n      overlayStyle: {\n        // backgroundColor:'#000',\n        opacity: '1'\n\n      }\n    };\n    return (\n      <Paper style={styles.paperContainer} elevation={4} key={'filter_source_menu'}>\n        <Tooltip placement={'bottom'} overlay={<div style={styles.tooltip}>{'Save'}</div>}\n                 overlayStyle={styles.overlayStyle}>\n          <IconButton\n            style={styles.button}\n            color={'secondary'}\n            onClick={() => {\n              console.log('save milonga')\n            }}\n          >\n            <Save style={styles.icon}/>\n          </IconButton>\n        </Tooltip>\n\n        <Tooltip placement={'bottom'} overlay={<div style={styles.tooltip}>{'Open a milonga'}</div>}\n                 overlayStyle={styles.overlayStyle}>\n          <IconButton\n            style={styles.button}\n            color={'secondary'}\n            onClick={() => {\n              console.log('open milonga')\n            }}\n          >\n            <OpenMilonga style={styles.icon}/>\n          </IconButton>\n        </Tooltip>\n\n        <Tooltip placement={'bottom'} overlay={<div style={styles.tooltip}>{'Show infos about Milonga'}</div>}\n                 overlayStyle={styles.overlayStyle}>\n          <IconButton\n            style={styles.button}\n            color={'secondary'}\n            onClick={() => {\n              console.log('info about milonga')\n            }}\n          >\n            <Info style={styles.icon}/>\n          </IconButton>\n        </Tooltip>\n\n        <Tooltip placement={'bottom'} overlay={<div style={styles.tooltip}>{'Delete the milonga'}</div>}\n                 overlayStyle={styles.overlayStyle}>\n          <IconButton\n            style={styles.button}\n            color={'secondary'}\n            onClick={() => {\n              console.log('delete milonga')\n            }}\n          >\n            <Delete style={styles.icon}/>\n          </IconButton>\n        </Tooltip>\n\n        <Tooltip placement={'bottom'}\n                 overlay={<div style={styles.tooltip}>{'Empty the milonga and start a new one'}</div>}\n                 overlayStyle={styles.overlayStyle}>\n          <IconButton\n            style={styles.button}\n            color={'secondary'}\n            onClick={this.handleClearMilonga}\n          >\n            <Sweep style={styles.icon}/>\n          </IconButton>\n        </Tooltip>\n      </Paper>\n    );\n  }\n\n  rowRenderer(params) {\n\n    let sizedRows = djUtils.getSizedRows(rowsTemplate, this.state.containerWidth);\n    let tango = this.props.milonga.list[params.index];\n    return (\n      <DataLine\n        tango={tango}\n        sizedRows={sizedRows}\n        rowHeight={this.props.milonga.listRowHeight}\n        style={params.style}\n        index={params.index}\n        key={'milonga_' + tango._id + '_' + params.index}\n        isMilonga\n      />\n    );\n  }\n\n  render() {\n    let milonga = this.props.milonga;\n    const {x, y, connectDropTarget, isOver} = this.props;\n    return connectDropTarget(\n      <div\n        style={styles.main}\n        onClick={this.handleOnClick}\n      >\n        {this.getMenu()}\n        {this.getHeader()}\n        <div style={styles.virtualListContainer} ref={'virtualContainer'}>\n          <VirtualList\n            width='100%'\n            height={this.state.containerHeight + milonga.listRowHeight}\n            itemCount={milonga.list.length}\n            itemSize={milonga.listRowHeight} // Also supports variable heights (array or function getter)\n            renderItem={(index, style) => {\n              return (this.rowRenderer(index))\n            }}\n          />\n        </div>\n\n      </div>\n    );\n  }\n\n}\n\n/*MilongaList.propTypes = {\n  connectDropTarget: PropTypes.func.isRequired,\n  isOver: PropTypes.bool.isRequired\n};*/\n\n\nMilongaList = DropTarget(ItemTypes.TANGO, milongaTarget, collect)(MilongaList);\n\nexport default connect((store) => {\n  return {\n    milonga: store.milonga,\n    selectedTangos: store.source.selectedTangos,\n    tangoList: store.source.displayTangoList,\n  }\n\n})(MilongaList);\n"]},"metadata":{},"sourceType":"module"}