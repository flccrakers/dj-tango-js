{"ast":null,"code":"import _objectSpread from \"/home/hoonakker/Dropbox/dvt/projet-JAVASCRIPT/react-tutos/dj-tango-js/IHM/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/hoonakker/Dropbox/dvt/projet-JAVASCRIPT/react-tutos/dj-tango-js/IHM/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/hoonakker/Dropbox/dvt/projet-JAVASCRIPT/react-tutos/dj-tango-js/IHM/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/hoonakker/Dropbox/dvt/projet-JAVASCRIPT/react-tutos/dj-tango-js/IHM/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/hoonakker/Dropbox/dvt/projet-JAVASCRIPT/react-tutos/dj-tango-js/IHM/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/hoonakker/Dropbox/dvt/projet-JAVASCRIPT/react-tutos/dj-tango-js/IHM/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/hoonakker/Dropbox/dvt/projet-JAVASCRIPT/react-tutos/dj-tango-js/IHM/src/components/source-list.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport * as sourceActions from '../redux/actions/sourceActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport VirtualList from 'react-tiny-virtual-list';\nimport DataLine from './data-line';\nimport { sortStatus as SORT } from '../services/dj-const';\nimport ArrowUp from '@material-ui/icons/ArrowUpward';\nimport ArrowDown from '@material-ui/icons/ArrowDownward';\nimport Shuffle from '@material-ui/icons/Shuffle';\nimport Refresh from '@material-ui/icons/Refresh';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Paper from '@material-ui/core/Paper';\nimport * as djUtils from './dj-utils';\nimport * as sizeActions from \"../redux/actions/componentSizeActions\";\nvar styles = {\n  leftAligned: {\n    textAlign: 'left'\n  },\n  center: {\n    textAlign: 'center'\n  },\n  ellipsis: {\n    whiteSpace: 'nowrap',\n    textOverflow: 'ellipsis',\n    overflow: 'hidden'\n  },\n  sourceScrolling: {\n    overflow: 'hidden',\n    overflowY: 'auto',\n    display: 'flex',\n    flex: '1 1 auto',\n    minHeight: '0px',\n    flexDirection: 'column'\n  },\n  mainSource: {\n    display: 'flex',\n    flexDirection: 'column',\n    flex: '1 1 50%',\n    margin: '3px 0px 0px 0px',\n    padding: '2px',\n    color: 'white',\n    // backgroundColor: 'blue',\n    border: '1pt solid ' + '#5f5f5f',\n    overflow: 'hidden'\n  },\n  virtualListContainer: {\n    flex: \"1\",\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  filterButton: {\n    padding: '0px',\n    margin: '0px',\n    height: '24px'\n  },\n  icon: {\n    width: '24px',\n    height: '24px'\n  }\n};\nvar rowsTemplate = [{\n  name: '',\n  field: 'played',\n  size: 40,\n  align: 'center',\n  sortStatus: SORT.NONE\n}, {\n  name: 'Title',\n  field: 'title',\n  size: 'auto',\n  align: 'left',\n  sortStatus: SORT.NONE\n}, {\n  name: 'Artist',\n  field: 'artist',\n  size: 'auto',\n  align: 'left',\n  sortStatus: SORT.NONE\n}, {\n  name: 'Singer',\n  field: 'singer',\n  size: 'auto',\n  align: 'left',\n  sortStatus: SORT.NONE\n}, {\n  name: 'Album',\n  field: 'album',\n  size: 'auto',\n  align: 'left',\n  sortStatus: SORT.NONE\n}, {\n  name: 'Genre',\n  field: 'genre',\n  size: 100,\n  align: 'center',\n  sortStatus: SORT.ASC\n}, {\n  name: 'Year',\n  field: 'year',\n  size: 50,\n  align: 'center',\n  sortStatus: SORT.NONE\n}, {\n  name: 'Bpm',\n  field: 'bpmHuman',\n  size: 80,\n  align: 'center',\n  sortStatus: SORT.NONE\n}, {\n  name: 'Time',\n  field: 'duration',\n  size: 40,\n  align: 'center',\n  sortStatus: SORT.NONE\n}];\nvar filterTemplate = [{\n  name: 'Artist',\n  field: 'artist',\n  size: 'auto',\n  align: 'left',\n  sortStatus: SORT.NONE\n}, {\n  name: 'Singer',\n  field: 'singer',\n  size: 'auto',\n  align: 'left',\n  sortStatus: SORT.NONE\n}, {\n  name: 'Album',\n  field: 'album',\n  size: 'auto',\n  align: 'left',\n  sortStatus: SORT.NONE\n}, {\n  name: 'Genre',\n  field: 'genre',\n  size: 150,\n  align: 'center',\n  sortStatus: SORT.ASC\n}];\n\nvar SourceList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SourceList, _Component);\n\n  function SourceList(props) {\n    var _this;\n\n    _classCallCheck(this, SourceList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SourceList).call(this, props));\n\n    _this.handleShuffle = function () {\n      _this.props.dispatch(sourceActions.shuffleTangoList(_this.props.source.displayTangoList));\n    };\n\n    _this.handleMenuItemClick = function (event, index, field) {\n      // console.log(index, field,);\n      var _this$props$source = _this.props.source,\n          selectedIndex = _this$props$source.selectedIndex,\n          anchorEl = _this$props$source.anchorEl;\n      selectedIndex[field] = index;\n      anchorEl[field] = null;\n\n      _this.props.dispatch(sourceActions.updateFilter(anchorEl, selectedIndex));\n\n      _this.props.dispatch(sourceActions.filterTangoList(selectedIndex, _this.props.source.filterList, _this.props.source.tangoList, _this.props.source.sortingDatas));\n    };\n\n    _this.handleClose = function (field) {\n      // console.log(field + ' to close');\n      var anchorEl = _this.props.source.anchorEl;\n      anchorEl[field] = null;\n\n      _this.props.dispatch(sourceActions.updateAnchorState(anchorEl));\n    };\n\n    _this.updateTango = function (tango) {\n      console.log('should play ' + tango.path);\n    };\n\n    _this.rowRenderer = function (params) {\n      var sizedRows = djUtils.getSizedRows(rowsTemplate, _this.props.sourceSize.width);\n      var tango = _this.props.source.displayTangoList[params.index];\n      return React.createElement(DataLine, {\n        tango: tango,\n        sizedRows: sizedRows,\n        rowHeight: _this.props.source.listRowHeight,\n        style: params.style,\n        index: params.index,\n        key: tango._id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 421\n        },\n        __self: this\n      });\n    };\n\n    _this._noRowsRenderer = function () {\n      return React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 434\n        },\n        __self: this\n      }, \"NOTHING\");\n    };\n\n    _this.virtualContainerRef = undefined;\n    _this.state = {\n      containerHeight: 600,\n      containerWidth: 600\n    };\n    return _this;\n  }\n\n  _createClass(SourceList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.updateDimensions();\n      window.addEventListener(\"resize\", this.updateDimensions.bind(this));\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.removeEventListener(\"resize\", this.updateDimensions);\n    }\n  }, {\n    key: \"updateDimensions\",\n    value: function updateDimensions() {\n      // const containerHeight = this.virtualContainerRef.clientHeight;\n      // const containerWidth = this.virtualContainerRef.clientWidth;\n      // this.setState({containerHeight, containerWidth});\n      var allSize = djUtils.calculateWidthAndHeightOfMilongaListAndSource();\n      this.props.dispatch(sizeActions.updateAllSize(allSize.milongaSize, allSize.sourceSize));\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(newProps) {// console.log(newProps);\n\n      /*if (this.props.tangoList.length === 0) {\n        this.props.dispatch(sourceActions.fetchAllTangos());\n      }*/\n    }\n  }, {\n    key: \"handleClickListItem\",\n    value: function handleClickListItem(field, event) {\n      console.log(field);\n      var anchorEl = this.props.source.anchorEl;\n      anchorEl[field] = event.currentTarget;\n      this.setState({\n        anchorEl: anchorEl\n      });\n    }\n  }, {\n    key: \"getFilterContent\",\n    value: function getFilterContent(sizedRows) {\n      var _this2 = this;\n\n      var ret = [];\n\n      var left = _objectSpread({}, styles.leftAligned, {\n        padding: '0px 2px 0px 2px',\n        WebkitUserSelect: 'none'\n      });\n\n      var center = _objectSpread({}, styles.center, {\n        padding: '0px 2px 0px 2px',\n        WebkitUserSelect: 'none'\n      });\n\n      var titleContainer = {\n        display: 'flex',\n        width: '100%',\n        alignItems: 'center',\n        cursor: 'pointer'\n      };\n      var optionsList = this.props.source.filterList;\n      var anchorEl = this.props.source.anchorEl;\n\n      if (optionsList !== null) {\n        sizedRows.forEach(function (row) {\n          var style = {\n            height: '24px'\n          }; // if (row.align === 'left') {\n          //   style = {...left, width: row.size, height: '24px'};\n          // } else if (row.align === 'center') {\n          //   style = {...center, width: row.size, height: '24px'};\n          // }\n          // console.log(row.name);\n\n          if (row.name !== '') {\n            // console.log(optionsList[row.field]);\n            ret.push(React.createElement(\"div\", {\n              key: 'filter_' + row.name,\n              style: style,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 257\n              },\n              __self: this\n            }, React.createElement(List, {\n              style: styles.filterButton,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 258\n              },\n              __self: this\n            }, React.createElement(ListItem, {\n              button: true,\n              \"aria-haspopup\": \"true\",\n              \"aria-controls\": \"lock-menu\",\n              \"aria-label\": \"When device is locked\",\n              onClick: _this2.handleClickListItem.bind(_this2, row.field),\n              style: styles.filterButton,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 259\n              },\n              __self: this\n            }, React.createElement(ListItemText, {\n              primary: optionsList[row.field][_this2.props.source.selectedIndex[row.field]] || '',\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 267\n              },\n              __self: this\n            }))), React.createElement(Menu, {\n              id: \"lock-menu\" + row.name,\n              anchorEl: anchorEl[row.field],\n              open: Boolean(anchorEl[row.field]),\n              onClose: _this2.handleClose.bind(_this2, row.field) // classes={styles.filterButton}\n              ,\n              styles: styles.filterButton,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 272\n              },\n              __self: this\n            }, optionsList[row.field].map(function (option, index) {\n              return React.createElement(MenuItem, {\n                key: option,\n                selected: index === _this2.props.source.selectedIndex[row.field],\n                onClick: function onClick(event) {\n                  return _this2.handleMenuItemClick(event, index, row.field);\n                },\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 282\n                },\n                __self: this\n              }, option);\n            }))));\n          } else {\n            ret.push(React.createElement(\"th\", {\n              key: 'filter_' + row.name,\n              style: style,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 296\n              },\n              __self: this\n            }, React.createElement(\"div\", {\n              style: titleContainer,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 297\n              },\n              __self: this\n            })));\n          }\n        });\n      }\n\n      return React.createElement(\"div\", {\n        style: {\n          display: 'flex',\n          flex: '1 1 auto',\n          justifyContent: 'space-around'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305\n        },\n        __self: this\n      }, ret);\n    }\n  }, {\n    key: \"getHeaderContent\",\n    value: function getHeaderContent(sizedRows) {\n      var _this3 = this;\n\n      var ret = [];\n\n      var left = _objectSpread({}, styles.leftAligned, {\n        padding: '0px 2px 5px 2px',\n        WebkitUserSelect: 'none'\n      });\n\n      var center = _objectSpread({}, styles.center, {\n        padding: '0px 2px 5px 2px',\n        WebkitUserSelect: 'none'\n      });\n\n      var titleContainer = {\n        display: 'flex',\n        width: '100%',\n        alignItems: 'center',\n        cursor: 'pointer'\n      };\n      var sortingDatas = this.props.source.sortingDatas;\n      sizedRows.forEach(function (row) {\n        var style;\n\n        if (row.align === 'left') {\n          style = _objectSpread({}, left, {\n            width: row.size,\n            height: '24px'\n          });\n        } else if (row.align === 'center') {\n          style = _objectSpread({}, center, {\n            width: row.size,\n            height: '24px'\n          });\n        }\n\n        var sort = [];\n\n        if (row.field === sortingDatas.sortingField) {\n          if (sortingDatas.sortingDirection === SORT.ASC) {\n            sort = [React.createElement(ArrowUp, {\n              style: {\n                color: 'white'\n              },\n              key: 'sortUp',\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 333\n              },\n              __self: this\n            })];\n          } else if (sortingDatas.sortingDirection === SORT.DESC) {\n            sort = [React.createElement(ArrowDown, {\n              style: {\n                color: 'white'\n              },\n              key: 'sortDown',\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 335\n              },\n              __self: this\n            })];\n          }\n        }\n\n        ret.push(React.createElement(\"th\", {\n          key: 'header_' + row.name,\n          style: style,\n          onClick: function onClick(event) {\n            _this3.handleTitleClick(event, row.field);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 340\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          style: titleContainer,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 343\n          },\n          __self: this\n        }, row.name, sort)));\n      });\n      return ret;\n    }\n  }, {\n    key: \"getFilter\",\n    value: function getFilter() {\n      var _this4 = this;\n\n      var sizedRows = djUtils.getSizedRows(filterTemplate, this.state.containerWidth - 100);\n      var styles = {\n        paperContainer: {\n          display: 'flex',\n          alignItems: 'center',\n          margin: '0px 2px 5px 2px'\n        },\n        button: {\n          height: '36px',\n          padding: '0 12px'\n        }\n      };\n      return [React.createElement(Paper, {\n        style: styles.paperContainer,\n        elevation: 4,\n        key: 'filter_source_menu',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 368\n        },\n        __self: this\n      }, React.createElement(IconButton, {\n        style: styles.button,\n        color: 'secondary',\n        onClick: this.handleShuffle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 369\n        },\n        __self: this\n      }, React.createElement(Shuffle, {\n        style: styles.icon,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 374\n        },\n        __self: this\n      })), React.createElement(IconButton, {\n        style: styles.button,\n        color: 'secondary',\n        onClick: function onClick() {\n          _this4.props.dispatch(sourceActions.clearFilter(_this4.props.source.filterList, _this4.props.source.tangoList, _this4.props.source.sortingDatas));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 376\n        },\n        __self: this\n      }, React.createElement(Refresh, {\n        style: styles.icon,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 383\n        },\n        __self: this\n      })), this.getFilterContent(sizedRows))];\n    }\n  }, {\n    key: \"getHeader\",\n    value: function getHeader() {\n      var sizedRows = djUtils.getSizedRows(rowsTemplate, this.state.containerWidth); // console.log(sizedRows);\n\n      var table = {\n        borderBottom: '1px solid red',\n        marginBottom: '15px'\n      };\n      return [React.createElement(\"table\", {\n        key: 'tableSourceTitle',\n        style: table,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 398\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 399\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 400\n        },\n        __self: this\n      }, this.getHeaderContent(sizedRows))))];\n    }\n  }, {\n    key: \"selectedRow\",\n    value: function selectedRow(id, selected) {\n      console.log(selected.Target); // console.log(selected.get());\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      var source = this.props.source;\n      return React.createElement(\"div\", {\n        style: styles.mainSource,\n        id: \"sources\",\n        ref: 'sources',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 442\n        },\n        __self: this\n      }, this.getFilter(), this.getHeader(), React.createElement(\"div\", {\n        style: styles.virtualListContainer,\n        ref: function ref(el) {\n          _this5.virtualContainerRef = el;\n        },\n        id: 'sourceVirtualList',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 445\n        },\n        __self: this\n      }, React.createElement(VirtualList, {\n        width: \"100%\",\n        height: this.state.containerHeight + source.listRowHeight,\n        itemCount: source.displayTangoList.length,\n        itemSize: source.listRowHeight // Also supports variable heights (array or function getter)\n        ,\n        renderItem: function renderItem(index, style) {\n          return _this5.rowRenderer(index);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 446\n        },\n        __self: this\n      })));\n    }\n  }, {\n    key: \"handleTitleClick\",\n    value: function handleTitleClick(event, field) {\n      event.preventDefault();\n      this.updateTitleStatus(field);\n    }\n  }, {\n    key: \"updateTitleStatus\",\n    value: function updateTitleStatus(newField) {\n      var field = this.props.source.sortingDatas.sortingField;\n      var status = this.props.source.sortingDatas.sortingDirection;\n\n      if (newField !== field) {\n        status = SORT.NONE;\n      }\n\n      this.props.dispatch(sourceActions.updateSortStatusAndSort(newField, status, this.props.source.displayTangoList));\n    }\n  }]);\n\n  return SourceList;\n}(Component);\n\nexport default connect(function (store) {\n  return {\n    // tangoList: store.source.tangoList,\n    source: store.source,\n    sourceSize: store.sizes.sourceSize\n  };\n})(SourceList);","map":{"version":3,"sources":["/home/hoonakker/Dropbox/dvt/projet-JAVASCRIPT/react-tutos/dj-tango-js/IHM/src/components/source-list.js"],"names":["React","Component","connect","sourceActions","IconButton","VirtualList","DataLine","sortStatus","SORT","ArrowUp","ArrowDown","Shuffle","Refresh","List","ListItem","ListItemText","Menu","MenuItem","Paper","djUtils","sizeActions","styles","leftAligned","textAlign","center","ellipsis","whiteSpace","textOverflow","overflow","sourceScrolling","overflowY","display","flex","minHeight","flexDirection","mainSource","margin","padding","color","border","virtualListContainer","filterButton","height","icon","width","rowsTemplate","name","field","size","align","NONE","ASC","filterTemplate","SourceList","props","handleShuffle","dispatch","shuffleTangoList","source","displayTangoList","handleMenuItemClick","event","index","selectedIndex","anchorEl","updateFilter","filterTangoList","filterList","tangoList","sortingDatas","handleClose","updateAnchorState","updateTango","tango","console","log","path","rowRenderer","params","sizedRows","getSizedRows","sourceSize","listRowHeight","style","_id","_noRowsRenderer","virtualContainerRef","undefined","state","containerHeight","containerWidth","updateDimensions","window","addEventListener","bind","removeEventListener","allSize","calculateWidthAndHeightOfMilongaListAndSource","updateAllSize","milongaSize","newProps","currentTarget","setState","ret","left","WebkitUserSelect","titleContainer","alignItems","cursor","optionsList","forEach","row","push","handleClickListItem","Boolean","map","option","justifyContent","sort","sortingField","sortingDirection","DESC","handleTitleClick","paperContainer","button","clearFilter","getFilterContent","table","borderBottom","marginBottom","getHeaderContent","id","selected","Target","getFilter","getHeader","el","length","preventDefault","updateTitleStatus","newField","status","updateSortStatusAndSort","store","sizes"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {connect} from 'react-redux';\nimport * as sourceActions from '../redux/actions/sourceActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport VirtualList from 'react-tiny-virtual-list';\nimport DataLine from './data-line';\nimport {sortStatus as SORT} from '../services/dj-const';\nimport ArrowUp from '@material-ui/icons/ArrowUpward';\nimport ArrowDown from '@material-ui/icons/ArrowDownward';\nimport Shuffle from '@material-ui/icons/Shuffle';\nimport Refresh from '@material-ui/icons/Refresh';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem'\nimport Paper from '@material-ui/core/Paper';\nimport * as djUtils from './dj-utils';\nimport * as sizeActions from \"../redux/actions/componentSizeActions\";\n\nconst styles = {\n  leftAligned: {\n    textAlign: 'left',\n  },\n  center: {\n    textAlign: 'center',\n  },\n  ellipsis: {\n    whiteSpace: 'nowrap',\n    textOverflow: 'ellipsis',\n    overflow: 'hidden',\n  },\n  sourceScrolling: {\n    overflow: 'hidden',\n    overflowY: 'auto',\n    display: 'flex',\n    flex: '1 1 auto',\n    minHeight: '0px',\n    flexDirection: 'column',\n  },\n  mainSource: {\n    display: 'flex',\n    flexDirection: 'column',\n    flex: '1 1 50%',\n    margin: '3px 0px 0px 0px',\n    padding: '2px',\n    color: 'white',\n    // backgroundColor: 'blue',\n    border: '1pt solid ' + '#5f5f5f',\n    overflow: 'hidden',\n  },\n  virtualListContainer: {\n    flex: \"1\",\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  filterButton: {\n    padding: '0px',\n    margin: '0px',\n    height: '24px',\n  },\n  icon: {\n    width: '24px',\n    height: '24px',\n  },\n};\n\nconst rowsTemplate = [\n  {\n    name: '',\n    field: 'played',\n    size: 40,\n    align: 'center',\n    sortStatus: SORT.NONE,\n  },\n  {\n    name: 'Title',\n    field: 'title',\n    size: 'auto',\n    align: 'left',\n    sortStatus: SORT.NONE,\n  },\n  {\n    name: 'Artist',\n    field: 'artist',\n    size: 'auto',\n    align: 'left',\n    sortStatus: SORT.NONE,\n  },\n  {\n    name: 'Singer',\n    field: 'singer',\n    size: 'auto',\n    align: 'left',\n    sortStatus: SORT.NONE,\n  },\n  {\n    name: 'Album',\n    field: 'album',\n    size: 'auto',\n    align: 'left',\n    sortStatus: SORT.NONE,\n  },\n  {\n    name: 'Genre',\n    field: 'genre',\n    size: 100,\n    align: 'center',\n    sortStatus: SORT.ASC,\n  },\n  {\n    name: 'Year',\n    field: 'year',\n    size: 50,\n    align: 'center',\n    sortStatus: SORT.NONE,\n  },\n  {\n    name: 'Bpm',\n    field: 'bpmHuman',\n    size: 80,\n    align: 'center',\n    sortStatus: SORT.NONE,\n  },\n  {\n    name: 'Time',\n    field: 'duration',\n    size: 40,\n    align: 'center',\n    sortStatus: SORT.NONE,\n  }\n];\n\nconst filterTemplate = [\n  {\n    name: 'Artist',\n    field: 'artist',\n    size: 'auto',\n    align: 'left',\n    sortStatus: SORT.NONE,\n  },\n  {\n    name: 'Singer',\n    field: 'singer',\n    size: 'auto',\n    align: 'left',\n    sortStatus: SORT.NONE,\n  },\n  {\n    name: 'Album',\n    field: 'album',\n    size: 'auto',\n    align: 'left',\n    sortStatus: SORT.NONE,\n  },\n  {\n    name: 'Genre',\n    field: 'genre',\n    size: 150,\n    align: 'center',\n    sortStatus: SORT.ASC,\n  },\n];\n\n\nclass SourceList extends Component {\n\n  handleShuffle = () => {\n    this.props.dispatch(sourceActions.shuffleTangoList(this.props.source.displayTangoList))\n  };\n\n  constructor(props) {\n    super(props);\n    this.virtualContainerRef = undefined;\n    this.state = {\n      containerHeight: 600,\n      containerWidth: 600,\n    };\n\n  }\n\n\n  componentDidMount() {\n    this.updateDimensions();\n    window.addEventListener(\"resize\", this.updateDimensions.bind(this));\n\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.updateDimensions);\n  }\n\n  updateDimensions() {\n    // const containerHeight = this.virtualContainerRef.clientHeight;\n    // const containerWidth = this.virtualContainerRef.clientWidth;\n    // this.setState({containerHeight, containerWidth});\n    let allSize = djUtils.calculateWidthAndHeightOfMilongaListAndSource();\n    this.props.dispatch(sizeActions.updateAllSize(allSize.milongaSize, allSize.sourceSize));\n  }\n\n  componentWillReceiveProps(newProps) {\n    // console.log(newProps);\n    /*if (this.props.tangoList.length === 0) {\n      this.props.dispatch(sourceActions.fetchAllTangos());\n    }*/\n\n  }\n\n  handleClickListItem(field, event) {\n    console.log(field);\n    let anchorEl = this.props.source.anchorEl;\n    anchorEl[field] = event.currentTarget;\n    this.setState({anchorEl});\n  }\n\n  handleMenuItemClick = (event, index, field) => {\n    // console.log(index, field,);\n    let {selectedIndex, anchorEl} = this.props.source;\n    selectedIndex[field] = index;\n    anchorEl[field] = null;\n    this.props.dispatch(sourceActions.updateFilter(anchorEl, selectedIndex));\n    this.props.dispatch(sourceActions.filterTangoList(selectedIndex, this.props.source.filterList, this.props.source.tangoList, this.props.source.sortingDatas))\n  };\n\n  handleClose = (field) => {\n    // console.log(field + ' to close');\n    let anchorEl = this.props.source.anchorEl;\n    anchorEl[field] = null;\n    this.props.dispatch(sourceActions.updateAnchorState(anchorEl));\n  };\n\n\n  getFilterContent(sizedRows) {\n    let ret = [];\n    let left = {...styles.leftAligned, padding: '0px 2px 0px 2px', WebkitUserSelect: 'none'};\n    let center = {...styles.center, padding: '0px 2px 0px 2px', WebkitUserSelect: 'none'};\n    let titleContainer = {\n      display: 'flex',\n      width: '100%',\n      alignItems: 'center',\n      cursor: 'pointer',\n    };\n    let optionsList = this.props.source.filterList;\n    const anchorEl = this.props.source.anchorEl;\n    if (optionsList !== null) {\n      sizedRows.forEach(row => {\n        let style = {height: '24px'};\n        // if (row.align === 'left') {\n        //   style = {...left, width: row.size, height: '24px'};\n        // } else if (row.align === 'center') {\n        //   style = {...center, width: row.size, height: '24px'};\n        // }\n        // console.log(row.name);\n        if (row.name !== '') {\n          // console.log(optionsList[row.field]);\n          ret.push(\n            <div key={'filter_' + row.name} style={style}>\n              <List style={styles.filterButton}>\n                <ListItem\n                  button\n                  aria-haspopup=\"true\"\n                  aria-controls=\"lock-menu\"\n                  aria-label=\"When device is locked\"\n                  onClick={this.handleClickListItem.bind(this, row.field)}\n                  style={styles.filterButton}\n                >\n                  <ListItemText\n                    primary={optionsList[row.field][this.props.source.selectedIndex[row.field]] || ''}\n                  />\n                </ListItem>\n              </List>\n              <Menu\n                id={\"lock-menu\" + row.name}\n                anchorEl={anchorEl[row.field]}\n                open={Boolean(anchorEl[row.field])}\n                onClose={this.handleClose.bind(this, row.field)}\n                // classes={styles.filterButton}\n                styles={styles.filterButton}\n              >\n                {optionsList[row.field].map((option, index) => {\n                  return (\n                    <MenuItem\n                      key={option}\n                      selected={index === this.props.source.selectedIndex[row.field]}\n                      onClick={event => this.handleMenuItemClick(event, index, row.field)}\n                    >\n                      {option}\n                    </MenuItem>\n                  )\n                })}\n              </Menu>\n            </div>\n          );\n        } else {\n          ret.push(\n            <th key={'filter_' + row.name} style={style}>\n              <div style={titleContainer}>\n              </div>\n            </th>\n          );\n        }\n      });\n    }\n    return (\n      <div style={{display:'flex', flex:'1 1 auto', justifyContent:'space-around'}}>\n        {ret}\n      </div>\n    );\n\n  }\n\n  getHeaderContent(sizedRows) {\n    let ret = [];\n    let left = {...styles.leftAligned, padding: '0px 2px 5px 2px', WebkitUserSelect: 'none'};\n    let center = {...styles.center, padding: '0px 2px 5px 2px', WebkitUserSelect: 'none'};\n    let titleContainer = {\n      display: 'flex',\n      width: '100%',\n      alignItems: 'center',\n      cursor: 'pointer',\n    };\n    let sortingDatas = this.props.source.sortingDatas;\n    sizedRows.forEach(row => {\n      let style;\n      if (row.align === 'left') {\n        style = {...left, width: row.size, height: '24px'};\n      } else if (row.align === 'center') {\n        style = {...center, width: row.size, height: '24px'};\n      }\n      let sort = [];\n      if (row.field === sortingDatas.sortingField) {\n        if (sortingDatas.sortingDirection === SORT.ASC) {\n          sort = [<ArrowUp style={{color: 'white'}} key={'sortUp'}/>];\n        } else if (sortingDatas.sortingDirection === SORT.DESC) {\n          sort = [<ArrowDown style={{color: 'white'}} key={'sortDown'}/>];\n        }\n      }\n\n      ret.push(\n        <th key={'header_' + row.name} style={style} onClick={(event) => {\n          this.handleTitleClick(event, row.field)\n        }}>\n          <div style={titleContainer}>\n            {row.name}{sort}\n          </div>\n        </th>\n      );\n    });\n    return ret;\n\n  }\n\n  getFilter() {\n    let sizedRows = djUtils.getSizedRows(filterTemplate, this.state.containerWidth - 100);\n\n    const styles = {\n      paperContainer: {\n        display: 'flex',\n        alignItems: 'center',\n        margin: '0px 2px 5px 2px',\n      },\n      button: {\n        height: '36px',\n        padding: '0 12px',\n      }\n    };\n    return [\n      <Paper style={styles.paperContainer} elevation={4} key={'filter_source_menu'}>\n        <IconButton\n          style={styles.button}\n          color={'secondary'}\n          onClick={this.handleShuffle}\n        >\n          <Shuffle style={styles.icon}/>\n        </IconButton>\n        <IconButton\n          style={styles.button}\n          color={'secondary'}\n          onClick={() => {\n            this.props.dispatch(sourceActions.clearFilter(this.props.source.filterList, this.props.source.tangoList, this.props.source.sortingDatas))\n          }}\n        >\n          <Refresh style={styles.icon}/>\n        </IconButton>\n        {this.getFilterContent(sizedRows)}\n      </Paper>\n    ];\n  }\n\n  getHeader() {\n    let sizedRows = djUtils.getSizedRows(rowsTemplate, this.state.containerWidth);\n    // console.log(sizedRows);\n    const table = {\n      borderBottom: '1px solid red',\n      marginBottom: '15px',\n    };\n    return [\n      <table key={'tableSourceTitle'} style={table}>\n        <thead>\n        <tr>\n          {this.getHeaderContent(sizedRows)}\n        </tr>\n        </thead>\n      </table>\n    ];\n  }\n\n  selectedRow(id, selected) {\n    console.log(selected.Target);\n    // console.log(selected.get());\n  }\n\n  updateTango = (tango) => {\n    console.log('should play ' + tango.path);\n  };\n\n  rowRenderer = (params) => {\n    let sizedRows = djUtils.getSizedRows(rowsTemplate,this.props.sourceSize.width);\n    let tango = this.props.source.displayTangoList[params.index];\n    return (\n      <DataLine\n        tango={tango}\n        sizedRows={sizedRows}\n        rowHeight={this.props.source.listRowHeight}\n        style={params.style}\n        index={params.index}\n        key={tango._id}\n      />\n    );\n  };\n\n\n  _noRowsRenderer = () => {\n    return (<span>NOTHING</span>);\n  };\n\n\n  render() {\n\n    let source: sourceReducer = this.props.source;\n    return (\n      <div style={styles.mainSource} id='sources' ref={'sources'}>\n        {this.getFilter()}\n        {this.getHeader()}\n        <div style={styles.virtualListContainer} ref={el => {this.virtualContainerRef = el}} id={'sourceVirtualList'}>\n          <VirtualList\n            width='100%'\n            height={this.state.containerHeight + source.listRowHeight}\n            itemCount={source.displayTangoList.length}\n            itemSize={source.listRowHeight} // Also supports variable heights (array or function getter)\n            renderItem={(index, style) => {\n              return (this.rowRenderer(index))\n            }}\n          />\n\n        </div>\n      </div>\n    );\n  }\n\n\n  handleTitleClick(event, field) {\n    event.preventDefault();\n    this.updateTitleStatus(field);\n\n  }\n\n  updateTitleStatus(newField) {\n    let field = this.props.source.sortingDatas.sortingField;\n    let status = this.props.source.sortingDatas.sortingDirection;\n    if (newField !== field) {\n      status = SORT.NONE;\n    }\n    this.props.dispatch(sourceActions.updateSortStatusAndSort(newField, status, this.props.source.displayTangoList));\n  }\n\n}\n\n\nexport default connect((store) => {\n  return {\n    // tangoList: store.source.tangoList,\n    source: store.source,\n    sourceSize:store.sizes.sourceSize,\n  }\n\n})(SourceList);\n\n\n"]},"metadata":{},"sourceType":"module"}