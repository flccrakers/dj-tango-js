{"ast":null,"code":"import * as tangoDataManagement from '../../services/tangoDataManagement';\n\nfunction updateTango(payload) {\n  return {\n    type: 'UPDATE_CURRENT_TANGO',\n    payload: payload\n  };\n}\n\nexport function updateCurrentTango(tango) {\n  return function (dispatch) {\n    tangoDataManagement.getTangoFile(tango._id).then(function (tangoFile) {\n      console.log(tangoFile);\n      console.log(typeof tangoFile);\n\n      if (typeof tangoFile === \"string\") {\n        dispatch(updateTheSong(tango, tangoFile));\n      } else if (typeof tangoFile === \"object\") {}\n    }).catch(function (error) {\n      console.error(error);\n      dispatch(updatePause(true));\n    });\n  };\n}\n\nfunction updateTheSong(tango, tangoFile) {\n  return function (disptach) {\n    var payload = {\n      tango: tango,\n      song: tangoFile\n    };\n    dispatch(updatePause(false));\n    dispatch(updateTango(payload));\n  };\n}\n/**\n * Store the progress of the current tango\n * @param value in milliseconds\n */\n\n\nexport function progress(value) {\n  return {\n    type: 'PROGRESS',\n    payload: value\n  };\n}\n/*export function storePlayerEl(element) {\n  return {\n    type: 'STORE_PLAYER',\n    payload: element,\n  }\n}*/\n\n/*export function play(){\n  this.getState().playerEl.play();\n}*/\n\n/*export function stop(player, duration){\n  // return (dispatch, getState) => {\n    let state = getState().player;\n    console.log(state);\n    plalyer.pause();\n    // state.playerEl.currentTime = state.currentTango.duration / 1000;\n    return{type:'DO_NOTHING'}\n    // this.rap.audioEl.currentTime=this.props.playerData.currentTango.duration/1000;\n  // }\n\n}*/\n\nexport function updateVolume(newValue) {\n  if (newValue < 0) newValue = 0;\n  return {\n    type: 'UPDATE_VOLUME',\n    payload: newValue\n  };\n}\nexport function saveAudioEl(audioEl) {\n  return {\n    type: 'SAVE_AUDIO_ELEMENT',\n    payload: audioEl\n  };\n}\nexport function updatePause(value) {\n  return {\n    type: 'UPDATE_PAUSE',\n    payload: value\n  };\n}","map":{"version":3,"sources":["/home/hoonakker/Dropbox/dvt/projet-JAVASCRIPT/react-tutos/dj-tango-js/IHM/src/redux/actions/playerActions.js"],"names":["tangoDataManagement","updateTango","payload","type","updateCurrentTango","tango","dispatch","getTangoFile","_id","then","tangoFile","console","log","updateTheSong","catch","error","updatePause","disptach","song","progress","value","updateVolume","newValue","saveAudioEl","audioEl"],"mappings":"AAAA,OAAO,KAAKA,mBAAZ,MAAqC,oCAArC;;AAGA,SAASC,WAAT,CAAqBC,OAArB,EAA8B;AAC5B,SAAO;AACLC,IAAAA,IAAI,EAAE,sBADD;AAELD,IAAAA,OAAO,EAAPA;AAFK,GAAP;AAKD;;AAED,OAAO,SAASE,kBAAT,CAA4BC,KAA5B,EAAmC;AACxC,SAAO,UAAUC,QAAV,EAAoB;AACzBN,IAAAA,mBAAmB,CAACO,YAApB,CAAiCF,KAAK,CAACG,GAAvC,EAA4CC,IAA5C,CAAiD,UAAAC,SAAS,EAAI;AAC5DC,MAAAA,OAAO,CAACC,GAAR,CAAYF,SAAZ;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAOF,SAAnB;;AACA,UAAI,OAAOA,SAAP,KAAqB,QAAzB,EAAmC;AACjCJ,QAAAA,QAAQ,CAACO,aAAa,CAACR,KAAD,EAAQK,SAAR,CAAd,CAAR;AACD,OAFD,MAEO,IAAI,OAAOA,SAAP,KAAqB,QAAzB,EAAmC,CAEzC;AAGF,KAVD,EAUGI,KAVH,CAUS,UAAAC,KAAK,EAAI;AAChBJ,MAAAA,OAAO,CAACI,KAAR,CAAcA,KAAd;AACAT,MAAAA,QAAQ,CAACU,WAAW,CAAC,IAAD,CAAZ,CAAR;AACD,KAbD;AAcD,GAfD;AAgBD;;AAED,SAASH,aAAT,CAAuBR,KAAvB,EAA8BK,SAA9B,EAAyC;AACvC,SAAO,UAAUO,QAAV,EAAoB;AACzB,QAAIf,OAAO,GAAG;AACZG,MAAAA,KAAK,EAAEA,KADK;AAEZa,MAAAA,IAAI,EAAER;AAFM,KAAd;AAIAJ,IAAAA,QAAQ,CAACU,WAAW,CAAC,KAAD,CAAZ,CAAR;AACAV,IAAAA,QAAQ,CAACL,WAAW,CAACC,OAAD,CAAZ,CAAR;AACD,GAPD;AAQD;AAED;;;;;;AAIA,OAAO,SAASiB,QAAT,CAAkBC,KAAlB,EAAyB;AAE9B,SAAO;AACLjB,IAAAA,IAAI,EAAE,UADD;AAELD,IAAAA,OAAO,EAAEkB;AAFJ,GAAP;AAKD;AAED;;;;;;;AAOA;;;;AAIA;;;;;;;;;;;;AAYA,OAAO,SAASC,YAAT,CAAsBC,QAAtB,EAAgC;AACrC,MAAIA,QAAQ,GAAG,CAAf,EAAkBA,QAAQ,GAAG,CAAX;AAClB,SAAO;AACLnB,IAAAA,IAAI,EAAE,eADD;AAELD,IAAAA,OAAO,EAAEoB;AAFJ,GAAP;AAKD;AAED,OAAO,SAASC,WAAT,CAAqBC,OAArB,EAA8B;AACnC,SAAO;AACLrB,IAAAA,IAAI,EAAE,oBADD;AAELD,IAAAA,OAAO,EAAEsB;AAFJ,GAAP;AAID;AAED,OAAO,SAASR,WAAT,CAAqBI,KAArB,EAA4B;AACjC,SAAO;AACLjB,IAAAA,IAAI,EAAE,cADD;AAELD,IAAAA,OAAO,EAAEkB;AAFJ,GAAP;AAID","sourcesContent":["import * as tangoDataManagement from '../../services/tangoDataManagement';\n\n\nfunction updateTango(payload) {\n  return {\n    type: 'UPDATE_CURRENT_TANGO',\n    payload,\n  }\n\n}\n\nexport function updateCurrentTango(tango) {\n  return function (dispatch) {\n    tangoDataManagement.getTangoFile(tango._id).then(tangoFile => {\n      console.log(tangoFile);\n      console.log(typeof tangoFile);\n      if (typeof tangoFile === \"string\") {\n        dispatch(updateTheSong(tango, tangoFile))\n      } else if (typeof tangoFile === \"object\") {\n\n      }\n\n\n    }).catch(error => {\n      console.error(error);\n      dispatch(updatePause(true));\n    });\n  }\n}\n\nfunction updateTheSong(tango, tangoFile) {\n  return function (disptach) {\n    let payload = {\n      tango: tango,\n      song: tangoFile,\n    };\n    dispatch(updatePause(false));\n    dispatch(updateTango(payload));\n  }\n}\n\n/**\n * Store the progress of the current tango\n * @param value in milliseconds\n */\nexport function progress(value) {\n\n  return {\n    type: 'PROGRESS',\n    payload: value\n  }\n\n}\n\n/*export function storePlayerEl(element) {\n  return {\n    type: 'STORE_PLAYER',\n    payload: element,\n  }\n}*/\n\n/*export function play(){\n  this.getState().playerEl.play();\n}*/\n\n/*export function stop(player, duration){\n  // return (dispatch, getState) => {\n    let state = getState().player;\n    console.log(state);\n    plalyer.pause();\n    // state.playerEl.currentTime = state.currentTango.duration / 1000;\n    return{type:'DO_NOTHING'}\n    // this.rap.audioEl.currentTime=this.props.playerData.currentTango.duration/1000;\n  // }\n\n}*/\n\nexport function updateVolume(newValue) {\n  if (newValue < 0) newValue = 0;\n  return {\n    type: 'UPDATE_VOLUME',\n    payload: newValue,\n  }\n\n}\n\nexport function saveAudioEl(audioEl) {\n  return {\n    type: 'SAVE_AUDIO_ELEMENT',\n    payload: audioEl,\n  }\n}\n\nexport function updatePause(value) {\n  return {\n    type: 'UPDATE_PAUSE',\n    payload: value,\n  }\n}"]},"metadata":{},"sourceType":"module"}