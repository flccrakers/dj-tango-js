{"ast":null,"code":"import * as tangoDataManagement from '../../services/tangoDataManagement';\n\nfunction updateTango(payload) {\n  return {\n    type: 'UPDATE_CURRENT_TANGO',\n    payload: payload\n  };\n}\n\nexport function updateCurrentTango(tango, enquedSnack) {\n  return function (dispatch) {\n    tangoDataManagement.getTangoFile(tango._id).then(function (tangoFile) {\n      console.log(tangoFile);\n      console.log(typeof tangoFile);\n\n      if (typeof tangoFile === \"string\" && tangoFile !== undefined) {\n        dispatch(updateTheSong(tango, tangoFile));\n      } else if (typeof tangoFile === \"object\" || tangoFile === undefined) {\n        if (tangoFile !== undefined) console.error(tangoFile.GeneralException);else console.error(\"The tango file is undefined\");\n        dispatch(updateTheSong(tango, tangoFile));\n      }\n    });\n  };\n}\n\nfunction updateTheSong(tango, tangoFile) {\n  return function (dispatch) {\n    var payload = {\n      tango: tango,\n      song: tangoFile\n    };\n    dispatch(updatePause(false));\n    dispatch(updateTango(payload));\n  };\n}\n/**\n * Store the progress of the current tango\n * @param value in milliseconds\n */\n\n\nexport function progress(value) {\n  return {\n    type: 'PROGRESS',\n    payload: value\n  };\n}\n/*export function storePlayerEl(element) {\n  return {\n    type: 'STORE_PLAYER',\n    payload: element,\n  }\n}*/\n\n/*export function play(){\n  this.getState().playerEl.play();\n}*/\n\n/*export function stop(player, duration){\n  // return (dispatch, getState) => {\n    let state = getState().player;\n    console.log(state);\n    plalyer.pause();\n    // state.playerEl.currentTime = state.currentTango.duration / 1000;\n    return{type:'DO_NOTHING'}\n    // this.rap.audioEl.currentTime=this.props.playerData.currentTango.duration/1000;\n  // }\n\n}*/\n\nexport function updateVolume(newValue) {\n  if (newValue < 0) newValue = 0;\n  return {\n    type: 'UPDATE_VOLUME',\n    payload: newValue\n  };\n}\nexport function saveAudioEl(audioEl) {\n  return {\n    type: 'SAVE_AUDIO_ELEMENT',\n    payload: audioEl\n  };\n}\nexport function updatePause(value) {\n  return {\n    type: 'UPDATE_PAUSE',\n    payload: value\n  };\n}","map":{"version":3,"sources":["/home/hoonakker/Dropbox/dvt/projet-JAVASCRIPT/react-tutos/dj-tango-js/IHM/src/redux/actions/playerActions.js"],"names":["tangoDataManagement","updateTango","payload","type","updateCurrentTango","tango","enquedSnack","dispatch","getTangoFile","_id","then","tangoFile","console","log","undefined","updateTheSong","error","GeneralException","song","updatePause","progress","value","updateVolume","newValue","saveAudioEl","audioEl"],"mappings":"AAAA,OAAO,KAAKA,mBAAZ,MAAqC,oCAArC;;AAGA,SAASC,WAAT,CAAqBC,OAArB,EAA8B;AAC5B,SAAO;AACLC,IAAAA,IAAI,EAAE,sBADD;AAELD,IAAAA,OAAO,EAAPA;AAFK,GAAP;AAKD;;AAED,OAAO,SAASE,kBAAT,CAA4BC,KAA5B,EAAmCC,WAAnC,EAAgD;AACrD,SAAO,UAAUC,QAAV,EAAoB;AACzBP,IAAAA,mBAAmB,CAACQ,YAApB,CAAiCH,KAAK,CAACI,GAAvC,EAA4CC,IAA5C,CAAiD,UAAAC,SAAS,EAAI;AAC5DC,MAAAA,OAAO,CAACC,GAAR,CAAYF,SAAZ;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAOF,SAAnB;;AACA,UAAI,OAAOA,SAAP,KAAqB,QAArB,IAAiCA,SAAS,KAAKG,SAAnD,EAA8D;AAC5DP,QAAAA,QAAQ,CAACQ,aAAa,CAACV,KAAD,EAAQM,SAAR,CAAd,CAAR;AACD,OAFD,MAEO,IAAI,OAAOA,SAAP,KAAqB,QAArB,IAAiCA,SAAS,KAAKG,SAAnD,EAA8D;AACnE,YAAIH,SAAS,KAAKG,SAAlB,EAA6BF,OAAO,CAACI,KAAR,CAAcL,SAAS,CAACM,gBAAxB,EAA7B,KACML,OAAO,CAACI,KAAR,CAAc,6BAAd,CAAD;AACLT,QAAAA,QAAQ,CAACQ,aAAa,CAACV,KAAD,EAAQM,SAAR,CAAd,CAAR;AACD;AACF,KAVD;AAWD,GAZD;AAaD;;AAED,SAASI,aAAT,CAAuBV,KAAvB,EAA8BM,SAA9B,EAAyC;AACvC,SAAO,UAAUJ,QAAV,EAAoB;AACzB,QAAIL,OAAO,GAAG;AACZG,MAAAA,KAAK,EAAEA,KADK;AAEZa,MAAAA,IAAI,EAAEP;AAFM,KAAd;AAIAJ,IAAAA,QAAQ,CAACY,WAAW,CAAC,KAAD,CAAZ,CAAR;AACAZ,IAAAA,QAAQ,CAACN,WAAW,CAACC,OAAD,CAAZ,CAAR;AACD,GAPD;AAQD;AAED;;;;;;AAIA,OAAO,SAASkB,QAAT,CAAkBC,KAAlB,EAAyB;AAE9B,SAAO;AACLlB,IAAAA,IAAI,EAAE,UADD;AAELD,IAAAA,OAAO,EAAEmB;AAFJ,GAAP;AAKD;AAED;;;;;;;AAOA;;;;AAIA;;;;;;;;;;;;AAYA,OAAO,SAASC,YAAT,CAAsBC,QAAtB,EAAgC;AACrC,MAAIA,QAAQ,GAAG,CAAf,EAAkBA,QAAQ,GAAG,CAAX;AAClB,SAAO;AACLpB,IAAAA,IAAI,EAAE,eADD;AAELD,IAAAA,OAAO,EAAEqB;AAFJ,GAAP;AAKD;AAED,OAAO,SAASC,WAAT,CAAqBC,OAArB,EAA8B;AACnC,SAAO;AACLtB,IAAAA,IAAI,EAAE,oBADD;AAELD,IAAAA,OAAO,EAAEuB;AAFJ,GAAP;AAID;AAED,OAAO,SAASN,WAAT,CAAqBE,KAArB,EAA4B;AACjC,SAAO;AACLlB,IAAAA,IAAI,EAAE,cADD;AAELD,IAAAA,OAAO,EAAEmB;AAFJ,GAAP;AAID","sourcesContent":["import * as tangoDataManagement from '../../services/tangoDataManagement';\n\n\nfunction updateTango(payload) {\n  return {\n    type: 'UPDATE_CURRENT_TANGO',\n    payload,\n  }\n\n}\n\nexport function updateCurrentTango(tango, enquedSnack) {\n  return function (dispatch) {\n    tangoDataManagement.getTangoFile(tango._id).then(tangoFile => {\n      console.log(tangoFile);\n      console.log(typeof tangoFile);\n      if (typeof tangoFile === \"string\" && tangoFile !== undefined) {\n        dispatch(updateTheSong(tango, tangoFile))\n      } else if (typeof tangoFile === \"object\" || tangoFile === undefined) {\n        if (tangoFile !== undefined) console.error(tangoFile.GeneralException);\n        else (console.error(\"The tango file is undefined\"));\n        dispatch(updateTheSong(tango, tangoFile));\n      }\n    });\n  }\n}\n\nfunction updateTheSong(tango, tangoFile) {\n  return function (dispatch) {\n    let payload = {\n      tango: tango,\n      song: tangoFile,\n    };\n    dispatch(updatePause(false));\n    dispatch(updateTango(payload));\n  }\n}\n\n/**\n * Store the progress of the current tango\n * @param value in milliseconds\n */\nexport function progress(value) {\n\n  return {\n    type: 'PROGRESS',\n    payload: value\n  }\n\n}\n\n/*export function storePlayerEl(element) {\n  return {\n    type: 'STORE_PLAYER',\n    payload: element,\n  }\n}*/\n\n/*export function play(){\n  this.getState().playerEl.play();\n}*/\n\n/*export function stop(player, duration){\n  // return (dispatch, getState) => {\n    let state = getState().player;\n    console.log(state);\n    plalyer.pause();\n    // state.playerEl.currentTime = state.currentTango.duration / 1000;\n    return{type:'DO_NOTHING'}\n    // this.rap.audioEl.currentTime=this.props.playerData.currentTango.duration/1000;\n  // }\n\n}*/\n\nexport function updateVolume(newValue) {\n  if (newValue < 0) newValue = 0;\n  return {\n    type: 'UPDATE_VOLUME',\n    payload: newValue,\n  }\n\n}\n\nexport function saveAudioEl(audioEl) {\n  return {\n    type: 'SAVE_AUDIO_ELEMENT',\n    payload: audioEl,\n  }\n}\n\nexport function updatePause(value) {\n  return {\n    type: 'UPDATE_PAUSE',\n    payload: value,\n  }\n}"]},"metadata":{},"sourceType":"module"}