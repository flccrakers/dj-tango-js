{"ast":null,"code":"import _objectSpread from \"/home/hoonakker/Dropbox/dvt/projet-JAVASCRIPT/react-tutos/dj-tango-js/IHM/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport flatten from \"flat\";\nexport default function reducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n    language: [],\n    //code:code, active:active\n    translations: {} //KEY:[lang0, lang1, lang2]\n\n  };\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case \"INITIALIZE\":\n      {\n        return _objectSpread({}, state, {\n          language: action.payload\n        });\n      }\n\n    case \"ADD_TRANSLATION_FOR_LANGUAGE\":\n      {\n        var position = 0;\n        var ret = state.translations;\n        state.language.forEach(function (element, index) {\n          if (element.code === action.payload.code) position = index;\n        });\n        var translatedResource = flatten(action.payload.resource);\n\n        for (var k in translatedResource) {\n          if (translatedResource.hasOwnProperty(k)) {\n            if (!ret[k]) {\n              ret[k] = [null, null, null];\n            }\n\n            ret[k][position] = translatedResource[k];\n          }\n        }\n\n        return _objectSpread({}, state, {\n          translations: ret\n        });\n      }\n\n    case \"SET_ACTIVE_LANGUAGE\":\n      {\n        var language = state.language;\n        language.forEach(function (element) {\n          element[\"active\"] = element.code === action.payload;\n        });\n        return _objectSpread({}, state, {\n          language: language\n        });\n      }\n\n    case \"persist/REHYDRATE\":\n      {\n        if (action.payload.locale !== undefined) {\n          return _objectSpread({}, state, {\n            language: action.payload.locale.language\n          });\n        } else {\n          return _objectSpread({}, state);\n        }\n      }\n\n    default:\n      {\n        return _objectSpread({}, state);\n      }\n  }\n}","map":{"version":3,"sources":["/home/hoonakker/Dropbox/dvt/projet-JAVASCRIPT/react-tutos/dj-tango-js/IHM/src/redux/reducers/localize-reducer.js"],"names":["flatten","reducer","state","language","translations","action","type","payload","position","ret","forEach","element","index","code","translatedResource","resource","k","hasOwnProperty","locale","undefined"],"mappings":";AAAA,OAAOA,OAAP,MAAoB,MAApB;AAEA,eAAe,SAASC,OAAT,GAIyB;AAAA,MAJRC,KAIQ,uEAJA;AACNC,IAAAA,QAAQ,EAAE,EADJ;AACQ;AACdC,IAAAA,YAAY,EAAE,EAFR,CAEW;;AAFX,GAIA;AAAA,MAARC,MAAQ;;AACtC,UAAQA,MAAM,CAACC,IAAf;AACE,SAAK,YAAL;AAAmB;AACjB,iCAAYJ,KAAZ;AAAmBC,UAAAA,QAAQ,EAAEE,MAAM,CAACE;AAApC;AACD;;AACD,SAAK,8BAAL;AAAqC;AACnC,YAAIC,QAAQ,GAAG,CAAf;AACA,YAAIC,GAAG,GAAGP,KAAK,CAACE,YAAhB;AAEAF,QAAAA,KAAK,CAACC,QAAN,CAAeO,OAAf,CAAuB,UAACC,OAAD,EAAUC,KAAV,EAAoB;AACzC,cAAID,OAAO,CAACE,IAAR,KAAiBR,MAAM,CAACE,OAAP,CAAeM,IAApC,EAA0CL,QAAQ,GAAGI,KAAX;AAC3C,SAFD;AAGA,YAAIE,kBAAkB,GAAGd,OAAO,CAACK,MAAM,CAACE,OAAP,CAAeQ,QAAhB,CAAhC;;AAEA,aAAK,IAAIC,CAAT,IAAcF,kBAAd,EAAkC;AAChC,cAAIA,kBAAkB,CAACG,cAAnB,CAAkCD,CAAlC,CAAJ,EAA0C;AACxC,gBAAI,CAACP,GAAG,CAACO,CAAD,CAAR,EAAa;AACXP,cAAAA,GAAG,CAACO,CAAD,CAAH,GAAS,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,CAAT;AACD;;AACDP,YAAAA,GAAG,CAACO,CAAD,CAAH,CAAOR,QAAP,IAAmBM,kBAAkB,CAACE,CAAD,CAArC;AACD;AACF;;AACD,iCAAYd,KAAZ;AAAmBE,UAAAA,YAAY,EAAEK;AAAjC;AACD;;AACD,SAAK,qBAAL;AAA4B;AAC1B,YAAIN,QAAQ,GAAGD,KAAK,CAACC,QAArB;AACAA,QAAAA,QAAQ,CAACO,OAAT,CAAiB,UAACC,OAAD,EAAa;AAC5BA,UAAAA,OAAO,CAAC,QAAD,CAAP,GAAoBA,OAAO,CAACE,IAAR,KAAiBR,MAAM,CAACE,OAA5C;AACD,SAFD;AAGA,iCAAYL,KAAZ;AAAmBC,UAAAA,QAAQ,EAAEA;AAA7B;AACD;;AACD,SAAK,mBAAL;AAA0B;AACxB,YAAIE,MAAM,CAACE,OAAP,CAAeW,MAAf,KAA0BC,SAA9B,EAAyC;AACvC,mCAAYjB,KAAZ;AAAmBC,YAAAA,QAAQ,EAAEE,MAAM,CAACE,OAAP,CAAeW,MAAf,CAAsBf;AAAnD;AACD,SAFD,MAEO;AACL,mCAAYD,KAAZ;AACD;AACF;;AAED;AAAS;AACP,iCAAYA,KAAZ;AACD;AAxCH;AA0CD","sourcesContent":["import flatten from \"flat\";\n\nexport default function reducer(state = {\n                                  language: [], //code:code, active:active\n                                  translations: {} //KEY:[lang0, lang1, lang2]\n                                },\n                                action) {\n  switch (action.type) {\n    case \"INITIALIZE\": {\n      return { ...state, language: action.payload };\n    }\n    case \"ADD_TRANSLATION_FOR_LANGUAGE\": {\n      let position = 0;\n      let ret = state.translations;\n\n      state.language.forEach((element, index) => {\n        if (element.code === action.payload.code) position = index;\n      });\n      let translatedResource = flatten(action.payload.resource);\n\n      for (let k in translatedResource) {\n        if (translatedResource.hasOwnProperty(k)) {\n          if (!ret[k]) {\n            ret[k] = [null, null, null];\n          }\n          ret[k][position] = translatedResource[k];\n        }\n      }\n      return { ...state, translations: ret };\n    }\n    case \"SET_ACTIVE_LANGUAGE\": {\n      let language = state.language;\n      language.forEach((element) => {\n        element[\"active\"] = element.code === action.payload;\n      });\n      return { ...state, language: language };\n    }\n    case \"persist/REHYDRATE\": {\n      if (action.payload.locale !== undefined) {\n        return { ...state, language: action.payload.locale.language };\n      } else {\n        return { ...state };\n      }\n    }\n\n    default: {\n      return { ...state };\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}